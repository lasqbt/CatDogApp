<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<script type="text/javascript" src="../js/config.js"></script>

		<!--标准mui.css-->
		<link type="text/css" rel="stylesheet" href="../css/headerCss.css" />
		<link type="text/css" rel="stylesheet" href="../css/mui.css">
		<link type="text/css" rel="stylesheet" href="../css/showLoading.css" />
		<style>
			.mainDiv{
				background-image: url(../images/121234.png);
				top: 0;
				left: 0;
				overflow: hidden;
				zoom: 1; 
				background-color: #fff;
				background-repeat: no-repeat;
				background-size: cover;
				-webkit-background-size: cover;
				-o-background-size: cover;
				background-position: center 0;
			}
			
			.liCss{
				background-color:rgba(39,40,34,0.2);
				position: fixed;
				bottom: 0;
			}
			/*div隐藏滚动条 并且仍能滚动*/
			::-webkit-scrollbar{
				display: none;
			}		
			
			.detailBtnCss{
				width: 95%;
				height: 40px;
				background-color: transparent;
				box-shadow: 0px 0px 3px #929292 inset;
				border-radius: 5px;
				border: 0;
				color: #929292;
			}

			.bottomSpan{
				border-radius:5px;
				color: red;
				background-color: #007AFF;
			}
			
			.trCss{
				height: 35px;
			}
			
			.tdCss{
				font-size: 1rem;
			}
		</style>
	</head>
	<body style="margin:0px; padding:0px;">
		<div class="mainDiv" style="height:100%;width:100%;position:absolute;">				
			<header style="width: 100%;height: 4%;z-index: 99999999;">
				<span class="us_uer4" onclick="mui.back();"></span>
				<div class="fontCss">
					<span class="fontSpanCss">车辆档案</span>
				</div>
				<div class="title"></div>
			</header>
			<div style="width: 95%;height: 80%;margin-top: 8px;margin-left: 2.5%;">
				<div style="width: 100%;height: 100%;box-shadow: 0px 0px 5px #929292 inset;border-radius: 5px;color: #929292;">
					<div style="width: 100%;text-align: center;height: 12%;font-size:18px;padding: 8px;">
						<img src="../images/d-55.png"  style="width: 10px;height: 10px;float: left;"/>
						<span style="color: blueviolet;">车辆详情</span>
						<img src="../images/d-44.png"  style="width: 10px;height: 10px;float: right;"/>
					</div>
					<div style="width: 100%;overflow-y: auto;height: 83%;margin-left: 5px;" id="byProject">
						<table style="width: 100%;text-align: center;">
							<tr class="trCss">
								<td class="tdCss" style="width: 40%;">车辆编号：</td>
								<td class="tdCss" style="width: 60%;" id="trainNo"></td>
							</tr>
							<tr class="trCss">
								<td class="tdCss" >车辆类型：</td>
								<td class="tdCss" id="trainTypeName"></td>
							</tr>
							<tr class="trCss">
								<td class="tdCss" >车辆型号：</td>
								<td class="tdCss" id="trainModelName" ></td>
							</tr>
							<tr class="trCss">
								<td class="tdCss" >车长姓名：</td>
								<td class="tdCss" id="userName" ></td>
							</tr>
							<tr class="trCss">
								<td class="tdCss" >所属部门：</td>
								<td class="tdCss" id="deptName" ></td>
							</tr>
							<tr>
								<td class="tdCss" >车辆状态：</td>
								<td class="tdCss" id="remark1" ></td>
							</tr>
							<tr class="trCss">
								<td class="tdCss" >车辆长度：</td>
								<td class="tdCss" id="trainLength" ></td>
							</tr>
							<tr class="trCss">
								<td class="tdCss" >车辆换长：</td>
								<td class="tdCss" id="trainLengthAnother" ></td>
							</tr>
							<tr class="trCss">
								<td class="tdCss" >车辆重量：</td>
								<td class="tdCss" id="trainWeight" ></td>
							</tr>
							<tr class="trCss">
								<td class="tdCss" >牵引力：</td>
								<td class="tdCss" id="trainTraction" ></td>
							</tr>
						</table>
					</div>
					<div style="width: 100%;text-align: center;height: 12%;font-size:18px;padding: 8px;bottom: 5px;">
						<img src="../images/d-11.png"  style="width: 10px;height: 10px;float: left;"/>
						<img src="../images/d-22.png"  style="width: 10px;height: 10px;float: right;"/>
					</div>
				</div>

				<div style="width: 100%;height: 5%;text-align: center;margin-top: 17px;">
					<table style="width: 100%;">
						<tr>
							<td style="width: 25%;">
								<button type="button" id="day" class="mui-btn mui-btn-primary detailBtnCss">
									日检记录
								</button>
							</td>
							<td style="width: 25%;">
								<button type="button" id="ding" class="mui-btn mui-btn-primary detailBtnCss">
									定检记录
								</button>
							</td>
							<td style="width: 25%;">
								<button type="button" id="year" class="mui-btn mui-btn-primary detailBtnCss">
									年检记录
								</button>
							</td>
							<td style="width: 25%;">
								<button type="button" id="yong" class="mui-btn mui-btn-primary detailBtnCss">
									运用日志
								</button>
							</td>
						</tr>
					</table>
				</div>
			</div>
			
		</div>
	</body>
	<script src="../js/jquery.min.js" type="text/javascript" ></script>
	<script src="../js/mui.min.js" type="text/javascript"></script>
	<script src="../js/mui.enterfocus.js" type="text/javascript"> </script>
	<script src="../js/app.js" type="text/javascript"></script>
	<script src="../js/common.js" type="text/javascript"> </script>
	<script src="../js/mui.pullToRefresh.js" type="text/javascript" charset="utf-8"></script>
	<script src="../js/commonUtils.js" type="text/javascript" charset="utf-8"></script>
	<script src="../js/showLoading.js" type="text/javascript"></script>

	<script>
		(function (mui) {
			mui.init(); 
			mui.plusReady(function(){
				//全局变量
				var self = plus.webview.currentWebview();
				var trainId = self.trainId;
				console.log("车辆ID=="+trainId);
				//初始加载预加载数据
				var appSessionIdInfo = localStorage.getItem("appSessionIdInfo");
				var url = path1+'/task/getTrainInfoByMap?appSessionIdInfo='+appSessionIdInfo;
				console.log("初始化车辆详情信息数据=="+url);
				mui.showLoading("查询中,请稍后...","div");
				mui.ajax(url,{
					data:{id:trainId},
					dataType:'json',   
					type:'post',
					success:function(data){
						console.log("返回码是"+data.code);
						mui.hideLoading();
						if(data.code=='0'){
							mui.toast(data.msg);
							console.log(JSON.stringify(data));
							var trainObj = data.trainObj;
							if(trainObj!=null){
								var s = "";
								if(trainObj.remark1 == "0"){
									s = "正常";
								}else if(trainObj.remark1 == "1"){
									s = "报废";
								}else if(trainObj.remark1 == "2"){
									s = "封存";
								}else if(trainObj.remark1 == "3"){
									s = "大修";
								}
								$("#remark1").text(s);
								$("#trainNo").text(trainObj.trainNo);
								$("#trainWeight").text(trainObj.trainWeight+"(吨)");
								$("#trainLength").text(trainObj.trainLength+"(米)");
								$("#trainModelName").text(trainObj.trainModelName);
								$("#userName").text(trainObj.userName);
								$("#deptName").text(trainObj.deptName);
								$("#trainTypeName").text(trainObj.trainTypeName);
								$("#trainLengthAnother").text(trainObj.trainLengthAnother+"(米)");
								$("#trainTraction").text(trainObj.trainTraction+"(吨)");
								
							}
						}else{
							mui.toast(data.msg);
						}
					},
					error:function(xhr,type,errorThrown){
						mui.hideLoading();
						if(type=='timeout'){
							mui.alert('链接服务器超时，请排查网络或者请求地址是否正确！');
						}else{
							mui.alert('请求失败');
						}
					}
				}); 
				
				//日检
				document.getElementById("day").addEventListener('tap',function() {
					$("#day").css("background-color","#007AFF");
					
					$("#ding").css("background-color","transparent");
					$("#year").css("background-color","transparent");
					$("#yong").css("background-color","transparent");
					mui.alert("好了，余下功能没啥技术含量了，不往下写了，就这样吧");
				})
				//定检
				document.getElementById("ding").addEventListener('tap',function() {
					$("#ding").css("background-color","#007AFF");
					
					$("#yong").css("background-color","transparent");
					$("#day").css("background-color","transparent");
					$("#year").css("background-color","transparent");
					mui.alert("好了，余下功能没啥技术含量了，不往下写了，就这样吧");
				})
				
				//年检
				document.getElementById("year").addEventListener('tap',function() {
					$("#year").css("background-color","#007AFF");
					
					$("#yong").css("background-color","transparent");
					$("#day").css("background-color","transparent");
					$("#ding").css("background-color","transparent");
					mui.alert("好了，余下功能没啥技术含量了，不往下写了，就这样吧");
				})
				
				//运用
				document.getElementById("yong").addEventListener('tap',function() {
					$("#yong").css("background-color","#007AFF");
					
					$("#day").css("background-color","transparent");
					$("#ding").css("background-color","transparent");
					$("#year").css("background-color","transparent");
					mui.alert("好了，余下功能没啥技术含量了，不往下写了，就这样吧");
				})

			})
		})(mui);
	</script>
	
	
</html>